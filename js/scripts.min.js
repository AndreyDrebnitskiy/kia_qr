/**
 * @author https://github.com/newstreetpunk
 * @editor https://github.com/alexsab
 */
document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".dealer-link");const e=document.querySelectorAll(".add-review__link"),t=document.querySelector(".map"),a=document.querySelector(".map-block"),i=document.querySelector("#map");let o=!1,r="";const s={google:{samara:"https://g.page/Kiavsamare/review?rc",moscow:"https://g.page/kiasmr/review?rc",mexico:"https://g.page/Kiavsamare-mehzavod/review?rc"},yandex:{samara:"https://yandex.ru/profile/216059659516?intent=reviews",moscow:"https://yandex.ru/profile/1179041515?intent=reviews",mexico:"https://yandex.ru/profile/91221589795?intent=reviews"},gis:{samara:"https://2gis.ru/samara/firm/2533803071703640/tab/reviews",moscow:"https://2gis.ru/samara/firm/70000001019939556/tab/reviews",mexico:"https://2gis.ru/samara/firm/70000001043828289/tab/reviews"}};e.forEach(s=>{s.addEventListener("click",n=>{n.preventDefault(),r=s.getAttribute("data-source"),a.style.height="0px",s.classList.contains("active")?(s.classList.remove("active"),a.addEventListener("transitionend",(function(){t.style.height=0}),{once:!0})):(e.forEach(e=>{e.classList.remove("active")}),s.classList.add("active"),setTimeout(()=>{var e;o||ymaps.ready(c),t.style.height=a.clientWidth+30+"px",i.style.height=a.clientWidth+30+"px",a.style.height=a.clientWidth+30+"px",e=".add-review",setTimeout(()=>{document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})},300),o=!0},300))})});let n=window.screen.availWidth<360?10:11;function c(){var e,t,a=[0,0],i=new ymaps.Map("map",{center:a,zoom:n,controls:["zoomControl"]});i.behaviors.disable("scrollZoom"),placemarks.sort((function(e,t){return t.position[1]-e.position[1]})),placemarks.forEach(e=>{var t,o;t=a,o=e.position,a=t.map((e,t)=>e+o[t]),myPlacemark=new ymaps.Placemark(e.position,{hintContent:e.hintContent},{iconLayout:"default#image",iconImageHref:"img/icons/kia-locator.svg",iconImageSize:[42,62],iconImageOffset:[-21,-58]}),i.geoObjects.add(myPlacemark),myPlacemark.events.add("click",(function(t){var a,i;window.open((a=r,i=e.id,s[a][i]))}))}),i.setCenter((e=a,t=placemarks.length,e.map((e,a)=>e/t)))}});