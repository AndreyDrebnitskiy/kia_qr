/**
 * @author https://github.com/newstreetpunk
 * @editor https://github.com/alexsab
 */
document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".dealer-link");const e=document.querySelectorAll(".add-review__link"),t=document.querySelector(".map"),a=document.querySelector(".map-block"),i=document.querySelector("#map");let r=!1,s="";const o={google:{samara:"https://g.page/Kiavsamare/review?rc",moscow:"https://g.page/kiasmr/review?rc",mexico:"https://g.page/Kiavsamare-mehzavod/review?rc",engels:"https://g.page/Kiaengels/review?rc",szr:"https://g.page/KiaSyzran/review?rc"},yandex:{samara:"https://yandex.ru/profile/216059659516?intent=reviews",moscow:"https://yandex.ru/profile/1179041515?intent=reviews",mexico:"https://yandex.ru/profile/91221589795?intent=reviews",engels:"https://yandex.ru/profile/1671033598?intent=reviews",szr:"https://yandex.ru/profile/87743443177?intent=reviews"},gis:{samara:"https://2gis.ru/samara/firm/2533803071703640/tab/reviews",moscow:"https://2gis.ru/samara/firm/70000001019939556/tab/reviews",mexico:"https://2gis.ru/samara/firm/70000001043828289/tab/reviews",engels:"https://2gis.ru/samara/firm/70000001018721119/tab/reviews",szr:"https://2gis.ru/samara/firm/70000001051678906/tab/reviews"}};e.forEach((o=>{o.addEventListener("click",(n=>{n.preventDefault(),s=o.getAttribute("data-source"),a.style.height="0px",o.classList.contains("active")?(o.classList.remove("active"),a.addEventListener("transitionend",(function(){t.style.height=0}),{once:!0})):(e.forEach((e=>{e.classList.remove("active")})),o.classList.add("active"),setTimeout((()=>{var e;r||ymaps.ready(c),t.style.height=a.clientWidth+30+"px",i.style.height=a.clientWidth+30+"px",a.style.height=a.clientWidth+30+"px",e=".add-review",setTimeout((()=>{document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})}),300),r=!0}),300))}))}));let n=window.screen.availWidth<360?10:11;function c(){var e,t,a=[0,0],i=new ymaps.Map("map",{center:a,zoom:n,controls:["zoomControl"]});i.behaviors.disable("scrollZoom"),HintLayout=ymaps.templateLayoutFactory.createClass("<div class='kia-hint'>{{ properties.name }}</div>",{getShape:function(){var e=this.getElement(),t=null;if(e){var a=e.firstChild;t=new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[0,0],[a.offsetWidth,a.offsetHeight]]))}return t}}),placemarks.sort((function(e,t){return t.position[1]-e.position[1]})),placemarks.forEach((e=>{var t,r;t=a,r=e.position,a=t.map(((e,t)=>e+r[t])),myPlacemark=new ymaps.Placemark(e.position,{name:e.hintContent},{hintLayout:HintLayout,iconLayout:"default#image",iconImageHref:"img/icons/kia-locator.svg?re",iconImageSize:[42,62],iconImageOffset:[-21,-58]}),i.geoObjects.add(myPlacemark),myPlacemark.events.add("click",(function(t){var a,i;window.open((a=s,i=e.id,o[a][i]))}))})),i.setCenter((e=a,t=placemarks.length,e.map(((e,a)=>e/t))))}}));